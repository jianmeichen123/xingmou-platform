<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gi.xm.platform.dao.UserDAO">
	<resultMap id="BaseResultMap" type="com.gi.xm.platform.pojo.User">
					<id column="id" property="id" jdbcType="BIGINT" />
								<result column="employ_no" property="employNo" jdbcType="VARCHAR" />
								<result column="real_name" property="realName" jdbcType="VARCHAR" />
								<result column="nick_name" property="nickName" jdbcType="VARCHAR" />
								<result column="status" property="status" jdbcType="VARCHAR" />
								<result column="type" property="type" jdbcType="VARCHAR" />
								<result column="department_id" property="departmentId" jdbcType="BIGINT" />
								<result column="department_name" property="departmentName" jdbcType="VARCHAR" />
								<result column="role" property="role" jdbcType="VARCHAR" />
								<result column="email" property="email" jdbcType="VARCHAR" />
								<result column="password" property="password" jdbcType="VARCHAR" />
								<result column="origin_password" property="originPassword" jdbcType="VARCHAR" />
								<result column="gender" property="gender" jdbcType="BOOLEAN" />
								<result column="is_admin" property="isAdmin" jdbcType="BOOLEAN" />
								<result column="birth" property="birth" jdbcType="DATE" />
								<result column="mobile" property="mobile" jdbcType="VARCHAR" />
								<result column="telephone" property="telephone" jdbcType="VARCHAR" />
								<result column="address" property="address" jdbcType="VARCHAR" />
								<result column="created_time" property="createdTime" jdbcType="BIGINT" />
								<result column="updated_time" property="updatedTime" jdbcType="BIGINT" />
						</resultMap>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		DELETE FROM dm_user
		WHERE id = #{id,jdbcType=BIGINT} 
	</delete>
	
	<insert id="insert" parameterType="com.gi.xm.platform.pojo.User" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO dm_user (
			employ_no,
			real_name,
			nick_name,
			status,
			type,
			department_id,
			department_name,
			role,
			email,
			password,
			origin_password,
			gender,
			is_admin,
			birth,
			mobile,
			telephone,
			address,
			created_time,
			updated_time
		)
		VALUES
		(
			#{employNo,jdbcType=VARCHAR},
			#{realName,jdbcType=VARCHAR},
			#{nickName,jdbcType=VARCHAR},
			#{status,jdbcType=VARCHAR},
			#{type,jdbcType=VARCHAR},
			#{departmentId,jdbcType=BIGINT},
			#{departmentName,jdbcType=VARCHAR},
			#{role,jdbcType=VARCHAR},
			#{email,jdbcType=VARCHAR},
			#{password,jdbcType=VARCHAR},
			#{originPassword,jdbcType=VARCHAR},
			#{gender,jdbcType=BOOLEAN},
			#{isAdmin,jdbcType=BOOLEAN},
			#{birth,jdbcType=DATE},
			#{mobile,jdbcType=VARCHAR},
			#{telephone,jdbcType=VARCHAR},
			#{address,jdbcType=VARCHAR},
			#{createdTime,jdbcType=BIGINT},
			#{updatedTime,jdbcType=BIGINT}
		)
	</insert>

	<update id="updateByPrimaryKey" parameterType="com.gi.xm.platform.pojo.User">
		UPDATE dm_user
		SET
			<if test="employNo!=null">employ_no = #{employNo,jdbcType=VARCHAR},</if>
			<if test="realName!=null">real_name = #{realName,jdbcType=VARCHAR},</if>
			<if test="nickName!=null">nick_name = #{nickName,jdbcType=VARCHAR},</if>
			<if test="type!=null">type = #{type,jdbcType=VARCHAR},</if>
			<if test="departmentName!=null">department_name = #{departmentName,jdbcType=VARCHAR},</if>
			<if test="role!=null">role = #{role,jdbcType=VARCHAR},</if>
			<if test="email!=null">email = #{email,jdbcType=VARCHAR},</if>
			<if test="password!=null">password = #{password,jdbcType=VARCHAR},</if>
			<if test="originPassword!=null">origin_password = #{originPassword,jdbcType=VARCHAR},</if>
			<if test="mobile!=null">mobile = #{mobile,jdbcType=VARCHAR},</if>
			<if test="telephone!=null">telephone = #{telephone,jdbcType=VARCHAR},</if>
			<if test="address!=null">address = #{address,jdbcType=VARCHAR},</if>
			<if test="departmentId!=null">department_id = #{departmentId,jdbcType=BIGINT},</if>
			<if test="gender!=null">gender = #{gender,jdbcType=BOOLEAN},</if>
			<if test="isAdmin!=null">is_admin = #{isAdmin,jdbcType=BOOLEAN},</if>
			<if test="birth!=null">birth = #{birth,jdbcType=DATE},</if>
			<if test="createdTime!=null">created_time = #{createdTime,jdbcType=BIGINT},</if>
			<if test="updatedTime!=null">updated_time = #{updatedTime,jdbcType=BIGINT},</if>
	    WHERE id = #{id,jdbcType=BIGINT} 
	</update>
	
			
	<update id="changeStatus">
		UPDATE dm_user
		SET
    		update_time = UNIX_TIMESTAMP(),
    		update_userid=#{updateUserid,jdbcType=VARCHAR},
            status=#{status,jdbcType=INTEGER}
	    WHERE id = #{id,jdbcType=BIGINT} 
	</update>
		
		
	<sql id="selectFields">
	id,employ_no,real_name,nick_name,status,type,department_id,department_name,role,email,password,origin_password,gender,is_admin,birth,mobile,telephone,address,created_time,updated_time
	</sql>
	
	<select id="selectAll" resultMap="BaseResultMap">
		SELECT
		<include refid="selectFields" />
		FROM dm_user
	</select>
	
	<select id="queryUser" resultMap="BaseResultMap" parameterType="com.gi.xm.platform.query.UserQuery">
		SELECT
		<include refid="selectFields" />
		FROM dm_user
		<include refid="queryWhereAndOrder" />
	</select>
	
	<sql id="queryWhereAndOrder">
		<where>
					<if test="id!=null">AND id = #{id,jdbcType=BIGINT}</if>
								<if test="employNo!=null and employNo!=''">AND employ_no = #{employNo,jdbcType=VARCHAR}</if>
								<if test="realName!=null and realName!=''">AND real_name = #{realName,jdbcType=VARCHAR}</if>
								<if test="nickName!=null and nickName!=''">AND nick_name = #{nickName,jdbcType=VARCHAR}</if>
								<if test="status!=null and status!=''">AND status = #{status,jdbcType=VARCHAR}</if>
								<if test="type!=null and type!=''">AND type = #{type,jdbcType=VARCHAR}</if>
								<if test="departmentId!=null">AND department_id = #{departmentId,jdbcType=BIGINT}</if>
								<if test="departmentName!=null and departmentName!=''">AND department_name = #{departmentName,jdbcType=VARCHAR}</if>
								<if test="role!=null and role!=''">AND role = #{role,jdbcType=VARCHAR}</if>
								<if test="email!=null and email!=''">AND email = #{email,jdbcType=VARCHAR}</if>
								<if test="password!=null and password!=''">AND password = #{password,jdbcType=VARCHAR}</if>
								<if test="originPassword!=null and originPassword!=''">AND origin_password = #{originPassword,jdbcType=VARCHAR}</if>
								<if test="gender!=null">AND gender = #{gender,jdbcType=BOOLEAN}</if>
								<if test="isAdmin!=null">AND is_admin = #{isAdmin,jdbcType=BOOLEAN}</if>
								<if test="birth!=null">AND birth = #{birth,jdbcType=DATE}</if>
								<if test="mobile!=null and mobile!=''">AND mobile = #{mobile,jdbcType=VARCHAR}</if>
								<if test="telephone!=null and telephone!=''">AND telephone = #{telephone,jdbcType=VARCHAR}</if>
								<if test="address!=null and address!=''">AND address = #{address,jdbcType=VARCHAR}</if>
								<if test="createdTime!=null">AND created_time = #{createdTime,jdbcType=BIGINT}</if>
								<if test="updatedTime!=null">AND updated_time = #{updatedTime,jdbcType=BIGINT}</if>
							
		</where>
		<choose>
			<when test="order!=null and orderBy!=null and order!='' and orderBy!=''">order by ${orderBy} ${order}</when>
			<otherwise>order by id desc</otherwise>
		</choose>
	</sql>
	
	<select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
		SELECT
		<include refid="selectFields" />
		FROM dm_user
		WHERE id = #{id,jdbcType=BIGINT} 
	</select>

	<select id="selectByPrimaryKeyForUpdate" resultMap="BaseResultMap" parameterType="java.lang.Long">
		SELECT
		<include refid="selectFields" />
		FROM dm_user
		WHERE id = #{id,jdbcType=BIGINT} 
		FOR UPDATE
	</select>
		
</mapper>