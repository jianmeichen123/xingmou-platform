<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gi.ctdn.dao.EventInfoDAO">
	<resultMap id="BaseResultMap" type="com.gi.ctdn.pojo.EventInfoList">
            <result column="investevent" property="investevent" jdbcType="VARCHAR" />
            <result column="round" property="round" jdbcType="VARCHAR" />
            <result column="districtName" property="districtName" jdbcType="VARCHAR" />
            <result column="districtSubName" property="districtSubName" jdbcType="VARCHAR" />
            <result column="investDate" property="investDate" jdbcType="DATE" />
            <result column="company" property="company" jdbcType="VARCHAR" />
            <result column="stage" property="stage" jdbcType="VARCHAR" />
            <result column="valuation" property="valuation" jdbcType="VARCHAR" />
            <result column="stock" property="stock" jdbcType="VARCHAR" />
            <result column="mode" property="mode" jdbcType="VARCHAR" />
            <result column="desc" property="desc" jdbcType="LONGVARCHAR" />
            <result column="sourceId" property="sourceId" jdbcType="INTEGER" />
            <result column="sourceCode" property="sourceCode" jdbcType="VARCHAR" />
            <result column="logo" property="logo" jdbcType="VARCHAR" />
            <result column="industryName" property="industryName" jdbcType="VARCHAR" />
            <result column="industrySubName" property="industrySubName" jdbcType="VARCHAR" />
            <result column="industryGrandsonName" property="industryGrandsonName" jdbcType="VARCHAR" />
            <result column="industryIds" property="industryIds" jdbcType="VARCHAR" />
            <result column="districtId" property="districtId" jdbcType="INTEGER" />
            <result column="districtSubId" property="districtSubId" jdbcType="INTEGER" />
            <result column="amountNum" property="amountNum" jdbcType="INTEGER" />
            <result column="amountStr" property="amountStr" jdbcType="VARCHAR" />
            <result column="currencyType" property="currencyType" jdbcType="VARCHAR" />
            <result column="investSideJson" property="investSideJson" jdbcType="VARCHAR" />
            <result column="bodyRole" property="bodyRole" jdbcType="VARCHAR" />
            <result column="sourceType" property="sourceType" jdbcType="VARCHAR" />
            <result column="isClick" property="isClick" jdbcType="VARCHAR" />
            <result column="invstorgids" property="invstorgids" jdbcType="VARCHAR" />
            <result column="invstorgnames" property="invstorgnames" jdbcType="VARCHAR" />
            <result column="districtGrandsonName" property="districtGrandsonName" jdbcType="VARCHAR" />
    </resultMap>


	<sql id="selectFields">
	    investevent,`desc`,round,districtName,districtSubName,investDate,company,stage,valuation,stock,mode,sourceId,sourceCode,logo,industryName,industrySubName,industryIds,districtId,districtSubId,amountNum,amountStr,currencyType,investSideJson,bodyRole,sourceType,isClick,invstorgids,invstorgnames,districtGrandsonName
	</sql>
	
			
	<select id="selectBySourceCode" resultMap="BaseResultMap" parameterType="java.lang.String">
		SELECT
            investDate,round,amountStr,valuation,stock,investSideJson,eventId
		FROM
		    app_event_info
		WHERE  sourceCode = #{sourceCode,jdbcType=VARCHAR}
        order by investDate desc
    </select>
			
	<select id="selectByEventId" resultMap="BaseResultMap"  parameterType="java.lang.Integer">
		SELECT
            <include refid="selectFields" />
		FROM
		    app_event_info
		WHERE  eventId = #{eventId,jdbcType=INTEGER}
	</select>

    <select id="selectBySourceId" resultMap="BaseResultMap"  parameterType="java.lang.Integer">
        SELECT
        <include refid="selectFields" />
        FROM
        app_event_info
        WHERE  invstorgids = #{sourceId,jdbcType=INTEGER}
    </select>

    <select id="selectByName" resultMap="BaseResultMap"  parameterType="java.lang.String">
        SELECT
        <include refid="selectFields" />
        FROM
        app_event_info
        WHERE  investSideJson like CONCAT('%', #{company,jdbcType=VARCHAR}, '%')
        order by investDate desc
    </select>

	<select id="selectAll" resultMap="BaseResultMap">
		SELECT
            <include refid="selectFields" />
		FROM
		    app_event_info
	</select>

    <select id="selectByInvestDate" resultMap="BaseResultMap">
        SELECT
        <include refid="selectFields" />
        FROM
        app_event_info
        ORDER BY investDate DESC limit 8
    </select>

    <select id="selectFromCtdn" resultMap="BaseResultMap">
        SELECT
        <include refid="selectFields" />
        FROM
        ctdn.app_event_info
        ORDER BY investDate DESC limit  #{pageSize,jdbcType=INTEGER}
    </select>
</mapper>